{"version":3,"sources":["components/DragAndDrop.js","components/Message.js","components/Progress.js","components/Model.js","components/Gallery.js","App.js","index.js"],"names":["DragAndDrop","props","data","dispatch","onClick","className","inDropZone","onDrop","e","preventDefault","stopPropagation","files","dataTransfer","length","existingFiles","fileList","map","f","name","filter","includes","type","match","dropDepth","handleDrop","onDragOver","dropEffect","handleDragOver","onDragEnter","handleDragEnter","onDragLeave","handleDragLeave","Message","msg","role","Progress","percentage","id","value","max","Model","fileName","closeModel","prevImage","nextImage","src","alt","groupBy","require","Gallery","useState","activeImage","setActiveImage","activeId","setActiveId","page","setPage","morePage","setMorePage","setFileList","listIndex","setListIndex","groupImages","setGroupImages","window","onscroll","debounce","innerHeight","document","documentElement","scrollTop","offsetHeight","a","aid","fileObject","file","axios","get","response","setid","tempList","concat","photolist","i","result","moment","startOf","format","console","error","useEffect","fetchImages","Object","keys","element","App","message","setMessage","uploadPercentage","setUploadPercentage","fileInput","React","createRef","ress","setRess","uploadHandler","event","formData","FormData","forEach","img","append","method","url","headers","onUploadProgress","progressEvent","parseInt","Math","round","loaded","total","setTimeout","res","useReducer","state","action","onSubmit","style","display","multiple","onChange","target","ref","current","click","key","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.95d5a63d.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst DragAndDrop = props => {\r\n\r\n  const { data, dispatch, onClick } = props;\r\n\r\n  const handleDragEnter = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    dispatch({ type: 'SET_DROP_DEPTH', dropDepth: data.dropDepth + 1 });\r\n  };\r\n\r\n  const handleDragLeave = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    dispatch({ type: 'SET_DROP_DEPTH', dropDepth: data.dropDepth - 1 });\r\n    if (data.dropDepth > 0) return\r\n    dispatch({ type: 'SET_IN_DROP_ZONE', inDropZone: false })\r\n  };\r\n\r\n  const handleDragOver = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    e.dataTransfer.dropEffect = 'copy';\r\n    dispatch({ type: 'SET_IN_DROP_ZONE', inDropZone: true });\r\n  };\r\n\r\n  const handleDrop = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    let files = [...e.dataTransfer.files];\r\n\r\n    if (files && files.length > 0) {\r\n      const existingFiles = data.fileList.map(f => f.name)\r\n      files = files.filter(f => !existingFiles.includes(f.name) && f.type.match(/image[/][a-z]*/))\r\n\r\n      dispatch({ type: 'ADD_FILE_TO_LIST', files });\r\n      dispatch({ type: 'SET_DROP_DEPTH', dropDepth: 0 });\r\n      dispatch({ type: 'SET_IN_DROP_ZONE', inDropZone: false });\r\n    }\r\n  };\r\n\r\n  return (\r\n\r\n    <div className={data.inDropZone ? 'drag-drop-zone inside-drag-area' : 'drag-drop-zone'}\r\n      onDrop={e => handleDrop(e)}\r\n      onDragOver={e => handleDragOver(e)}\r\n      onDragEnter={e => handleDragEnter(e)}\r\n      onDragLeave={e => handleDragLeave(e)}\r\n      onClick ={onClick}\r\n    >\r\n      <p>Drag files here or click to upload (only Images)</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DragAndDrop;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Message = ({ msg }) => {\r\n  return (\r\n    <div className='alert alert-info alert-dismissible fade show' role='alert'>\r\n      {msg}\r\n    </div>\r\n  );\r\n};\r\n\r\nMessage.propTypes = {\r\n  msg: PropTypes.string.isRequired\r\n};\r\n\r\nexport default Message;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Progress = ({ percentage }) => {\r\n  return (\r\n    <div className='progress'>\r\n        <progress id=\"file\" value={percentage} max=\"100\"> {percentage}% </progress>\r\n    </div>\r\n  );\r\n};\r\n\r\nProgress.propTypes = {\r\n  percentage: PropTypes.number.isRequired\r\n};\r\n\r\nexport default Progress;","import React from 'react';\r\n\r\nconst Model = props => {\r\n\r\n    const { fileName, closeModel,prevImage,nextImage } = props;\r\n\r\n    return (\r\n        <div id=\"myModal\" className=\"modal\">\r\n\r\n            <span className=\"close\" onClick={closeModel}>&times;</span>\r\n\r\n            <img className=\"modal-content fade\" src={'/uploads/image720/' + fileName} id=\"img01\" alt=\"\" />\r\n            <button type=\"button\" className=\"prev\" onClick={prevImage} >&#10094;</button>\r\n            <button type=\"button\" className=\"next\" onClick={nextImage} >&#10095;</button>\r\n            <div id=\"caption\">{fileName}</div>\r\n        </div>\r\n    );\r\n}\r\nexport default Model;","import React, { useState,useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Model from './Model';\r\nimport debounce from \"lodash.debounce\";\r\nimport moment from 'moment/moment'\r\nconst groupBy = require('lodash.groupby');\r\n//const moment = require('moment');\r\n\r\nconst Gallery = props => {\r\n    const [activeImage, setActiveImage] = useState('');\r\n    const [activeId, setActiveId] = useState(0);\r\n    const [page, setPage] = useState(1);\r\n    //const [loading, setloading] = useState(false);\r\n    const [morePage, setMorePage] = useState(false);\r\n    const limit = 30;\r\n    const [fileList, setFileList] = useState([]);\r\n    const [listIndex, setListIndex] = useState(0);\r\n    const [groupImages,setGroupImages] = useState({});\r\n    \r\n    window.onscroll = debounce(() => {\r\n      if ( !morePage) return;\r\n      if (window.innerHeight + document.documentElement.scrollTop + 1\r\n        >= document.documentElement.offsetHeight) {\r\n         setPage(page+1);\r\n        setListIndex(listIndex+limit);\r\n      }\r\n    },100);\r\n\r\n    const closeModel = () =>{\r\n        setActiveImage('');\r\n        setActiveId(0);\r\n    }\r\n    const prevImage = () =>{\r\n        let aid = activeId-1<0 ? activeId : activeId-1;\r\n        let fileObject = fileList.filter(e => {\r\n            return e.id === aid;\r\n        })\r\n        setActiveImage(fileObject[0].file.fileName)\r\n        setActiveId(aid);\r\n    }\r\n    const nextImage = async() =>{\r\n      if(activeId+1===fileList.length ){\r\n        await setPage(page+1);\r\n        await setListIndex(listIndex+limit);\r\n\r\n      }\r\n      let aid = activeId+1===fileList.length ? activeId : activeId+1;\r\n      let fileObject = fileList.filter(e => {\r\n          return e.id === aid;\r\n      })\r\n        setActiveImage(fileObject[0].file.fileName)\r\n        setActiveId(aid);\r\n    }\r\n\r\n    // const reducer = (state, action) => {\r\n    //     switch (action.type) {\r\n    //       case 'FETCH_IMAGES':\r\n    //         let concatArray = listIndex===0 ? [] : data.fileList;\r\n    //         return { fileList: concatArray.concat(action.files.map((f,i) => ({\r\n    //                 id:listIndex+i,\r\n    //                 file : f\r\n    //         }))),\r\n    //         morePage : action.pages\r\n    //       };\r\n    //       default:\r\n    //         return state;\r\n    //     }\r\n    //   };\r\n      // const [data, dispatch] = React.useReducer(\r\n      //   reducer, { fileList: [],morePage : false }\r\n      // )\r\n\r\n\r\nasync function fetchImages() {\r\n    try {\r\n      const response = await axios.get(`/images?page=${page}&limit=${limit}`);\r\n      //await dispatch({ type: 'FETCH_IMAGES',files: response.data.photolist,pages : response.data.morePage} );\r\n      const setid = page===1 ? listIndex :listIndex+limit;\r\n      const tempList = fileList.concat(response.data.photolist.map((f, i) => ({\r\n        id: setid + i,\r\n        file: f\r\n      })));\r\n      setMorePage(response.data.morePage); \r\n      setFileList(tempList);\r\n      setGroupImages(groupBy(fileList, (result) => moment(result.file['createdAt'], 'YYYY-MM-DD').startOf('date').format('DD MMM YYYY')))\r\n      \r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    fetchImages();\r\n}, [page])\r\nuseEffect(()=>{\r\n  setGroupImages(groupBy(fileList, (result) => moment(result.file['createdAt'], 'YYYY-MM-DD').startOf('date').format('DD MMM YYYY')))\r\n}, [fileList])\r\n  \r\n  return (\r\n    <div className='gallery'>\r\n      <div className=\"rowBox\"  >\r\n        {Object.keys(groupImages).map(element => {\r\n          \r\n          return(\r\n            <div className=\"row-section\">\r\n              <div className=\"groupHeader\">{element}</div>\r\n              <hr/>\r\n              <div className=\"row\">\r\n              {groupImages[element].map(f => {\r\n    return (\r\n\r\n      <div className=\"column\">\r\n        <img value={f.id} alt={f.file.fileName} src={'/uploads/image720/' + f.file.fileName} onClick={() => {\r\n          setActiveImage(f.file.fileName);\r\n          setActiveId(f.id);\r\n        }} className=\"myImages\" />\r\n      </div>\r\n    )\r\n  })}       </div>\r\n            </div>\r\n          )\r\n    \r\n})\r\n}\r\n\r\n      </div>\r\n      {activeImage ?\r\n        <Model fileName={activeImage} closeModel={closeModel} prevImage={prevImage} nextImage={nextImage} />\r\n        : null\r\n      }\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Gallery;","import React, { useState } from 'react';\nimport './app2.css';\nimport axios from 'axios';\nimport DragAndDrop from './components/DragAndDrop';\nimport Message from './components/Message';\nimport Progress from './components/Progress';\nimport Gallery from './components/Gallery';\n\nfunction App() {\n  const reducer = (state, action) => {\n    switch (action.type) {\n      case 'SET_DROP_DEPTH':\n        return { ...state, dropDepth: action.dropDepth }\n      case 'SET_IN_DROP_ZONE':\n        return { ...state, inDropZone: action.inDropZone };\n      case 'ADD_FILE_TO_LIST':\n        return { ...state, fileList: state.fileList.concat(action.files) };\n      default:\n        return state;\n    }\n  };\n  const [message, setMessage] = useState('');\n  const [uploadPercentage, setUploadPercentage] = useState(10);\n  const fileInput = React.createRef();\n  const [ress, setRess] = useState({});\n  const fileHandler = event => {\n\n    let files = [...event.target.files];\n\n    if (files && files.length > 0) {\n      const existingFiles = data.fileList.map(f => f.name)\n      files = files.filter(f => !existingFiles.includes(f.name) && f.type.match(/image[/][a-z]*/))\n      dispatch({ type: 'ADD_FILE_TO_LIST', files });\n    }\n    setMessage('');\n    setUploadPercentage(0);\n  }\n  const uploadHandler = async event => {\n    event.preventDefault();\n    const formData = new FormData();\n    [...data.fileList].forEach(img => {\n      formData.append(\"arrayOfFilesName\", img)\n    })\n    data.fileList=[]\n    const res = await axios({\n      method: \"POST\",\n      url: \"/upload\",\n      data: formData,\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }, onUploadProgress: progressEvent => {\n        setUploadPercentage(\n          parseInt(\n            Math.round((progressEvent.loaded * 100) / progressEvent.total)\n          )\n        );\n        setMessage(parseInt(\n          Math.round((progressEvent.loaded * 100) / progressEvent.total)\n        ));\n        \n        // Clear percentage\n        setTimeout(() => {\n          setUploadPercentage(0);\n          setMessage('');\n        }, 4000);\n\n        \n      }\n    })\n    setMessage('File Uploaded');\n    setRess(res.data);\n  }\n  const handleDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const [data, dispatch] = React.useReducer(\n    reducer, { dropDepth: 0, inDropZone: false, fileList: [] }\n  )\n  return (\n    <div className=\"App\" onDrop={e => handleDrop(e)} onDragOver={e => handleDragOver(e)}>\n      {message ? <div><Message msg={message} /> <Progress percentage={uploadPercentage}/> </div>  : null}\n      <form onSubmit={uploadHandler}>\n        <input type=\"file\" style={{ display: 'none' }} name=\"uploadedFiles\"\n          multiple=\"multiple\" onChange={fileHandler} ref={fileInput} />\n\n        <DragAndDrop data={data} dispatch={dispatch} onClick={() => fileInput.current.click()} />\n        <input type=\"submit\" value=\"Upload\" className=\"submitBtn\" />\n        \n      </form>\n      <Gallery data={ress}/>\n      \n\n\n      <ol className=\"dropped-files\">\n        {data.fileList.map(f => {\n          return (\n            <li key={f.name}>{f.name}</li>\n          )\n        })}\n      </ol>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}