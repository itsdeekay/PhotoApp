(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,a){e.exports=a(49)},30:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),i=a(3),l=a.n(i),u=a(4),s=a(6),p=a(2),f=a(9),m=(a(30),a(8)),d=a.n(m),E=function(e){var t=e.data,a=e.dispatch,n=e.onClick;return r.a.createElement("div",{className:t.inDropZone?"drag-drop-zone inside-drag-area":"drag-drop-zone",onDrop:function(e){return function(e){e.preventDefault(),e.stopPropagation();var n=Object(s.a)(e.dataTransfer.files);if(n&&n.length>0){var r=t.fileList.map((function(e){return e.name}));n=n.filter((function(e){return!r.includes(e.name)&&e.type.match(/image[/][a-z]*/)})),a({type:"ADD_FILE_TO_LIST",files:n}),a({type:"SET_DROP_DEPTH",dropDepth:0}),a({type:"SET_IN_DROP_ZONE",inDropZone:!1})}}(e)},onDragOver:function(e){return function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",a({type:"SET_IN_DROP_ZONE",inDropZone:!0})}(e)},onDragEnter:function(e){return function(e){e.preventDefault(),e.stopPropagation(),a({type:"SET_DROP_DEPTH",dropDepth:t.dropDepth+1})}(e)},onDragLeave:function(e){return function(e){e.preventDefault(),e.stopPropagation(),a({type:"SET_DROP_DEPTH",dropDepth:t.dropDepth-1}),t.dropDepth>0||a({type:"SET_IN_DROP_ZONE",inDropZone:!1})}(e)},onClick:n},r.a.createElement("p",null,"Drag files here or click to upload (only Images)"))},D=function(e){var t=e.msg;return r.a.createElement("div",{className:"alert alert-info alert-dismissible fade show",role:"alert"},t)},O=function(e){var t=e.percentage;return r.a.createElement("div",{className:"progress"},r.a.createElement("progress",{id:"file",value:t,max:"100"}," ",t,"% "))},v=function(e){var t=e.fileName,a=e.closeModel,n=e.prevImage,c=e.nextImage;return r.a.createElement("div",{id:"myModal",className:"modal"},r.a.createElement("span",{className:"close",onClick:a},"\xd7"),r.a.createElement("img",{className:"modal-content fade",src:"/uploads/image720/"+t,id:"img01",alt:""}),r.a.createElement("button",{type:"button",className:"prev",onClick:n},"\u276e"),r.a.createElement("button",{type:"button",className:"next",onClick:c},"\u276f"),r.a.createElement("div",{id:"caption"},t))},g=a(23),b=a.n(g),h=a(10),N=a.n(h),j=a(48),y=function(e){var t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(0),s=Object(p.a)(i,2),f=s[0],m=s[1],E=Object(n.useState)(1),D=Object(p.a)(E,2),O=D[0],g=D[1],h=Object(n.useState)(!1),y=Object(p.a)(h,2),_=y[0],S=y[1],T=Object(n.useState)([]),P=Object(p.a)(T,2),I=P[0],k=P[1],w=Object(n.useState)(0),M=Object(p.a)(w,2),Y=M[0],x=M[1],L=Object(n.useState)({}),Z=Object(p.a)(L,2),R=Z[0],C=Z[1];window.onscroll=b()((function(){_&&window.innerHeight+document.documentElement.scrollTop+1>=document.documentElement.offsetHeight&&(g(O+1),x(Y+30))}),100);var F=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f+1!==I.length){e.next=5;break}return e.next=3,g(O+1);case 3:return e.next=5,x(Y+30);case 5:t=f+1===I.length?f:f+1,a=I.filter((function(e){return e.id===t})),o(a[0].file.fileName),m(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function H(){return(H=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/images?page=".concat(O,"&limit=").concat(30));case 3:t=e.sent,a=1===O?Y:Y+30,n=I.concat(t.data.photolist.map((function(e,t){return{id:a+t,file:e}}))),S(t.data.morePage),k(n),C(j(I,(function(e){return N()(e.file.createdAt,"YYYY-MM-DD").startOf("date").format("DD MMM YYYY")}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){H.apply(this,arguments)}()}),[O]),Object(n.useEffect)((function(){C(j(I,(function(e){return N()(e.file.createdAt,"YYYY-MM-DD").startOf("date").format("DD MMM YYYY")})))}),[I]),r.a.createElement("div",{className:"gallery"},r.a.createElement("div",{className:"rowBox"},Object.keys(R).map((function(e){return r.a.createElement("div",{className:"row-section"},r.a.createElement("div",{className:"groupHeader"},e),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},R[e].map((function(e){return r.a.createElement("div",{className:"column"},r.a.createElement("img",{value:e.id,alt:e.file.fileName,src:"/uploads/image720/"+e.file.fileName,onClick:function(){o(e.file.fileName),m(e.id)},className:"myImages"}))})),"       "))}))),c?r.a.createElement(v,{fileName:c,closeModel:function(){o(""),m(0)},prevImage:function(){var e=f-1<0?f:f-1,t=I.filter((function(t){return t.id===e}));o(t[0].file.fileName),m(e)},nextImage:F}):null)};var _=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(10),i=Object(p.a)(o,2),m=i[0],v=i[1],g=r.a.createRef(),b=Object(n.useState)({}),h=Object(p.a)(b,2),N=h[0],j=h[1],_=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=new FormData,Object(s.a)(P.fileList).forEach((function(e){a.append("arrayOfFilesName",e)})),P.fileList=[],e.next=6,d()({method:"POST",url:"/upload",data:a,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){v(parseInt(Math.round(100*e.loaded/e.total))),c(parseInt(Math.round(100*e.loaded/e.total))),setTimeout((function(){v(0),c("")}),4e3)}});case 6:n=e.sent,c("File Uploaded"),j(n.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=r.a.useReducer((function(e,t){switch(t.type){case"SET_DROP_DEPTH":return Object(f.a)({},e,{dropDepth:t.dropDepth});case"SET_IN_DROP_ZONE":return Object(f.a)({},e,{inDropZone:t.inDropZone});case"ADD_FILE_TO_LIST":return Object(f.a)({},e,{fileList:e.fileList.concat(t.files)});default:return e}}),{dropDepth:0,inDropZone:!1,fileList:[]}),T=Object(p.a)(S,2),P=T[0],I=T[1];return r.a.createElement("div",{className:"App",onDrop:function(e){return function(e){e.preventDefault(),e.stopPropagation()}(e)},onDragOver:function(e){return function(e){e.preventDefault(),e.stopPropagation()}(e)}},a?r.a.createElement("div",null,r.a.createElement(D,{msg:a})," ",r.a.createElement(O,{percentage:m})," "):null,r.a.createElement("form",{onSubmit:_},r.a.createElement("input",{type:"file",style:{display:"none"},name:"uploadedFiles",multiple:"multiple",onChange:function(e){var t=Object(s.a)(e.target.files);if(t&&t.length>0){var a=P.fileList.map((function(e){return e.name}));t=t.filter((function(e){return!a.includes(e.name)&&e.type.match(/image[/][a-z]*/)})),I({type:"ADD_FILE_TO_LIST",files:t})}c(""),v(0)},ref:g}),r.a.createElement(E,{data:P,dispatch:I,onClick:function(){return g.current.click()}}),r.a.createElement("input",{type:"submit",value:"Upload",className:"submitBtn"})),r.a.createElement(y,{data:N}),r.a.createElement("ol",{className:"dropped-files"},P.fileList.map((function(e){return r.a.createElement("li",{key:e.name},e.name)}))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.95d5a63d.chunk.js.map